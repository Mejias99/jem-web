<!-- Esta vista es para atraer al usuario a inscribirse partiendo de que no conoce a JeM
        El usuario no sabe que es Jem
        Acción orientada: inscribirse
        Explicación de que es JeM con texto, fotos, video.. con cajas section (h2, text, image, btn)
        Nuestro equipo, Nuestros idolos
        Ultima caja convincente con boton sin img
        -->

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¿Qué es JeM?</title>
    <!-- Tailwind -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <!-- Tema/utilidades globales -->
    <link href="assets/css/jem.css" rel="stylesheet" type="text/tailwindcss">
    <!-- Fuente Urbanist -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body class="font-['Urbanist'] bg-[#148E75]">
    <div id="header"></div>
    <main class="pt-[40px]">
        <section class="mx-auto max-w-2xl py-6">
            <div
            class="w-full aspect-[500/310]
                    bg-[url('assets/img/mural.png')] bg-no-repeat bg-center
                    bg-[length:100%_auto]">
            </div>
        </section>
        <section class="mx-auto max-w-3xl px-4 pb-10">
            <div class="bg-white/95 rounded-2xl shadow-md p-6 md:p-8 text-center">
                <h1 class="text-4xl md:text-4xl font-extrabold text-gray-900">
                ¿Qué es Juventud en Marcha?
                </h1>

                <p class="mt-4 text-gray-700 md:text-lg">
                Somos Juventud en Marcha: jóvenes trabajadores que organizamos actividades,
                formación y campañas por barrios más vivos, empleo digno y servicios públicos
                de calidad. Creemos en la organización, la cultura y la acción comunitaria.
                </p>

                <p class="mt-3 text-gray-400 italic">
                "Si nadie se mueve, tendremos que movernos nosotros"
                </p>

                <a href="inscripcion.html"
                class="mt-6 inline-flex items-center px-5 py-2.5 text-sm font-semibold
                        text-white bg-[#e26872] hover:bg-red-500/90 active:bg-red-500/90
                        focus:outline-none focus:ring-2 focus:ring-emerald-300 focus:ring-offset-2">
                Únete ahora
                </a>
            </div>
        </section>

        <!-- Reels -->
        <section class="mx-auto max-w-6xl px-4 pb-12" id="reels">
            <div class="relative">

                <!-- Grid de reels -->
                <div id="reels-grid" class="flex gap-3">
                    <!-- Reel 1 -->
                    <article class="reel relative aspect-[9/16] rounded-2xl overflow-hidden bg-black ring-1 ring-black/10">
                        <video class="absolute inset-0 h-full w-full object-cover" preload="metadata" playsinline muted>
                            <source src="assets/video/vivienda.mp4" type="video/mp4">
                        </video>
                        <!-- Play overlay -->
                        <button class="play hidden absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 h-14 w-14 items-center justify-center rounded-full bg-black/60 ring-1 ring-white/30">
                            <span class="sr-only">Reproducir</span>
                            <span class="ml-0.5 block border-l-[14px] border-l-white border-y-[9px] border-y-transparent"></span>
                        </button>
                    </article>

                    <!-- Reel 2 -->
                    <article class="reel relative aspect-[9/16] rounded-2xl overflow-hidden bg-black ring-1 ring-black/10">
                        <video class="absolute inset-0 h-full w-full object-cover" preload="metadata" playsinline muted>
                            <source src="assets/video/mejiacongreso.mp4" type="video/mp4">
                        </video>
                        <button class="play hidden absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 h-14 w-14 items-center justify-center rounded-full bg-black/60 ring-1 ring-white/30">
                            <span class="sr-only">Reproducir</span>
                            <span class="ml-0.5 block border-l-[14px] border-l-white border-y-[9px] border-y-transparent"></span>
                        </button>
                    </article>

                    <!-- Reel 3 -->
                    <article class="reel relative aspect-[9/16] rounded-2xl overflow-hidden bg-black ring-1 ring-black/10">
                        <video class="absolute inset-0 h-full w-full object-cover" preload="metadata" playsinline muted>
                            <source src="assets/video/luciacongreso.mp4" type="video/mp4">
                        </video>
                        <button class="play hidden absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 h-14 w-14 items-center justify-center rounded-full bg-black/60 ring-1 ring-white/30">
                            <span class="sr-only">Reproducir</span>
                            <span class="ml-0.5 block border-l-[14px] border-l-white border-y-[9px] border-y-transparent"></span>
                        </button>
                    </article>
                </div>
            </div>
        </section>

    </main>
    <footer></footer>
    <script type="module">
        window.addEventListener('DOMContentLoaded', async () => {
            async function loadPartial(targetId, url){
                const el = document.getElementById(targetId);
                if (!el) throw new Error(`No existe #${targetId}`);
                const resp = await fetch(url, { cache: 'no-cache' });
                if (!resp.ok) throw new Error(`No se pudo cargar ${url}`);
                el.innerHTML = await resp.text();
                return el;
            }

            // Header
            try {
                const headerEl = await loadPartial('header', './partials/header.html');
                const { initHeader } = await import('./js/header.js');
                initHeader(headerEl);
            } catch (e) { console.error(e); }

            // Footer
            try { await loadPartial('footer', './partials/footer.html'); } catch (e) { console.error(e); }

            // Reels
            const grid = document.getElementById('reels-grid');
            if (!grid) return;

            const cards = [...grid.querySelectorAll('.reel')];

            function setActive(i) {
                cards.forEach((card, idx) => {
                    const play = card.querySelector('.play');
                    const vid  = card.querySelector('video');
                    const active = idx === i;

                    card.classList.toggle('reel-active', active);

                    if (active) {
                        play.classList.add('hidden');
                    } else {
                        play.classList.remove('hidden');
                        vid.pause();
                        vid.muted = true;
                    }
                });

                if (i >= 0) {
                    const activeCard = cards[i];
                    const vid = activeCard.querySelector('video');
                    const onEnd = (e) => {
                        if (e.propertyName !== 'flex') return;
                        vid.muted = false;
                        vid.play().catch(() => {});
                        activeCard.removeEventListener('transitionend', onEnd);
                    };
                    activeCard.addEventListener('transitionend', onEnd);
                }
            }

            cards.forEach((card, idx) => {
                const playBtn = card.querySelector('.play');
                const vid     = card.querySelector('video');

                card.addEventListener('click', () => setActive(idx));

                playBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    vid.muted = false;
                    vid.play().catch(() => {});
                    playBtn.classList.add('hidden');
                });

                vid.addEventListener('pause', () => playBtn.classList.remove('hidden'));
                vid.addEventListener('ended', () => playBtn.classList.remove('hidden'));
            });
        });
    </script>
</body>
</html>